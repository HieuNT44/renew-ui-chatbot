import{r as o,j as e,m as Yt,p as Xt,h as W,q as mt,c as U,u as Zt,v as Jt,o as pt,B as Q,l as Je,s as fe,_ as Qt,t as re}from"./index-CZVU0qtJ.js";import{u as es,a as ts,F as ss,c as Oe,d as Le,e as Me,f as Ae,I as Qe,g as Ne,T as et}from"./textarea-BT3Xj6QG.js";import{u as ns}from"./useLocation-BBfT4qYc.js";import{C as tt,a as st,b as nt}from"./collapsible-oCo_RJFZ.js";import{M as ot,I as Be}from"./main-Cd2z4xQN.js";import{c as at,S as os}from"./scroll-area-CGUPxWqd.js";import{w as Ie,H as ht,E as Ue,R as as,B as ft,I as Ye,a4 as rs,J as ls,C as B,F as L,a5 as le,K as cs,a6 as is,a7 as ds,N as us,Q as ms,O as ps,U as hs,V as fs,W as xs,Y as gs,G as vs,T as Fe,x as Ve,y as He}from"./dropdown-menu-CqWC4q07.js";import{u as xt,a as gt,H as rt,T as lt,C as ct,S as ws}from"./theme-switch-Da4tIi1p.js";import{C as it}from"./confirm-dialog-Dx1t64YG.js";import{P as bs}from"./profile-dropdown-tf11bExk.js";import{d as Ss}from"./documents-e4NcoftY.js";import{C as dt,G as js}from"./globe--R3oGWA-.js";import{P as Cs}from"./plus-D7hW9zoq.js";import{F as ys}from"./file-text-CiUUEET7.js";const Ns=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Te=Ie("chevron-down",Ns);const Ts=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ps=Ie("chevron-up",Ts);const Is=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Es=Ie("link",Is);const _s=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ze=Ie("loader-circle",_s);function ks(s){const a=Rs(s),t=o.forwardRef((l,r)=>{const{children:m,...c}=l,d=o.Children.toArray(m),u=d.find(Os);if(u){const f=u.props.children,w=d.map(v=>v===u?o.Children.count(f)>1?o.Children.only(null):o.isValidElement(f)?f.props.children:null:v);return e.jsx(a,{...c,ref:r,children:o.isValidElement(f)?o.cloneElement(f,void 0,w):null})}return e.jsx(a,{...c,ref:r,children:m})});return t.displayName=`${s}.Slot`,t}function Rs(s){const a=o.forwardRef((t,l)=>{const{children:r,...m}=t;if(o.isValidElement(r)){const c=Ms(r),d=Ls(m,r.props);return r.type!==o.Fragment&&(d.ref=l?Yt(l,c):c),o.cloneElement(r,d)}return o.Children.count(r)>1?o.Children.only(null):null});return a.displayName=`${s}.SlotClone`,a}var Ds=Symbol("radix.slottable");function Os(s){return o.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Ds}function Ls(s,a){const t={...a};for(const l in a){const r=s[l],m=a[l];/^on[A-Z]/.test(l)?r&&m?t[l]=(...d)=>{const u=m(...d);return r(...d),u}:r&&(t[l]=r):l==="style"?t[l]={...r,...m}:l==="className"&&(t[l]=[r,m].filter(Boolean).join(" "))}return{...s,...t}}function Ms(s){let a=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=a&&"isReactWarning"in a&&a.isReactWarning;return t?s.ref:(a=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=a&&"isReactWarning"in a&&a.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var As=[" ","Enter","ArrowUp","ArrowDown"],Bs=[" ","Enter"],me="Select",[Ee,_e,Fs]=rs(me),[xe]=ft(me,[Fs,ht]),ke=ht(),[Vs,ce]=xe(me),[Hs,zs]=xe(me),vt=s=>{const{__scopeSelect:a,children:t,open:l,defaultOpen:r,onOpenChange:m,value:c,defaultValue:d,onValueChange:u,dir:f,name:w,autoComplete:v,disabled:T,required:j,form:y}=s,h=ke(a),[b,C]=o.useState(null),[x,S]=o.useState(null),[$,F]=o.useState(!1),ne=Xt(f),[E,k]=Ue({prop:l,defaultProp:r??!1,onChange:m,caller:me}),[K,X]=Ue({prop:c,defaultProp:d,onChange:u,caller:me}),Z=o.useRef(null),R=b?y||!!b.closest("form"):!0,[M,V]=o.useState(new Set),z=Array.from(M).map(O=>O.props.value).join(";");return e.jsx(as,{...h,children:e.jsxs(Vs,{required:j,scope:a,trigger:b,onTriggerChange:C,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:$,onValueNodeHasChildrenChange:F,contentId:Ye(),value:K,onValueChange:X,open:E,onOpenChange:k,dir:ne,triggerPointerDownPosRef:Z,disabled:T,children:[e.jsx(Ee.Provider,{scope:a,children:e.jsx(Hs,{scope:s.__scopeSelect,onNativeOptionAdd:o.useCallback(O=>{V(I=>new Set(I).add(O))},[]),onNativeOptionRemove:o.useCallback(O=>{V(I=>{const q=new Set(I);return q.delete(O),q})},[]),children:t})}),R?e.jsxs(Vt,{"aria-hidden":!0,required:j,tabIndex:-1,name:w,autoComplete:v,value:K,onChange:O=>X(O.target.value),disabled:T,form:y,children:[K===void 0?e.jsx("option",{value:""}):null,Array.from(M)]},z):null]})})};vt.displayName=me;var wt="SelectTrigger",bt=o.forwardRef((s,a)=>{const{__scopeSelect:t,disabled:l=!1,...r}=s,m=ke(t),c=ce(wt,t),d=c.disabled||l,u=W(a,c.onTriggerChange),f=_e(t),w=o.useRef("touch"),[v,T,j]=zt(h=>{const b=f().filter(S=>!S.disabled),C=b.find(S=>S.value===c.value),x=Ut(b,h,C);x!==void 0&&c.onValueChange(x.value)}),y=h=>{d||(c.onOpenChange(!0),j()),h&&(c.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return e.jsx(ls,{asChild:!0,...m,children:e.jsx(B.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":Ht(c.value)?"":void 0,...r,ref:u,onClick:L(r.onClick,h=>{h.currentTarget.focus(),w.current!=="mouse"&&y(h)}),onPointerDown:L(r.onPointerDown,h=>{w.current=h.pointerType;const b=h.target;b.hasPointerCapture(h.pointerId)&&b.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(y(h),h.preventDefault())}),onKeyDown:L(r.onKeyDown,h=>{const b=v.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&T(h.key),!(b&&h.key===" ")&&As.includes(h.key)&&(y(),h.preventDefault())})})})});bt.displayName=wt;var St="SelectValue",jt=o.forwardRef((s,a)=>{const{__scopeSelect:t,className:l,style:r,children:m,placeholder:c="",...d}=s,u=ce(St,t),{onValueNodeHasChildrenChange:f}=u,w=m!==void 0,v=W(a,u.onValueNodeChange);return le(()=>{f(w)},[f,w]),e.jsx(B.span,{...d,ref:v,style:{pointerEvents:"none"},children:Ht(u.value)?e.jsx(e.Fragment,{children:c}):m})});jt.displayName=St;var Us="SelectIcon",Ct=o.forwardRef((s,a)=>{const{__scopeSelect:t,children:l,...r}=s;return e.jsx(B.span,{"aria-hidden":!0,...r,ref:a,children:l||"▼"})});Ct.displayName=Us;var Ws="SelectPortal",yt=s=>e.jsx(cs,{asChild:!0,...s});yt.displayName=Ws;var pe="SelectContent",Nt=o.forwardRef((s,a)=>{const t=ce(pe,s.__scopeSelect),[l,r]=o.useState();if(le(()=>{r(new DocumentFragment)},[]),!t.open){const m=l;return m?mt.createPortal(e.jsx(Tt,{scope:s.__scopeSelect,children:e.jsx(Ee.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),m):null}return e.jsx(Pt,{...s,ref:a})});Nt.displayName=pe;var Y=10,[Tt,ie]=xe(pe),$s="SelectContentImpl",Ks=ks("SelectContent.RemoveScroll"),Pt=o.forwardRef((s,a)=>{const{__scopeSelect:t,position:l="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:m,onPointerDownOutside:c,side:d,sideOffset:u,align:f,alignOffset:w,arrowPadding:v,collisionBoundary:T,collisionPadding:j,sticky:y,hideWhenDetached:h,avoidCollisions:b,...C}=s,x=ce(pe,t),[S,$]=o.useState(null),[F,ne]=o.useState(null),E=W(a,g=>$(g)),[k,K]=o.useState(null),[X,Z]=o.useState(null),R=_e(t),[M,V]=o.useState(!1),z=o.useRef(!1);o.useEffect(()=>{if(S)return us(S)},[S]),ms();const O=o.useCallback(g=>{const[_,...A]=R().map(D=>D.ref.current),[N]=A.slice(-1),P=document.activeElement;for(const D of g)if(D===P||(D?.scrollIntoView({block:"nearest"}),D===_&&F&&(F.scrollTop=0),D===N&&F&&(F.scrollTop=F.scrollHeight),D?.focus(),document.activeElement!==P))return},[R,F]),I=o.useCallback(()=>O([k,S]),[O,k,S]);o.useEffect(()=>{M&&I()},[M,I]);const{onOpenChange:q,triggerPointerDownPosRef:J}=x;o.useEffect(()=>{if(S){let g={x:0,y:0};const _=N=>{g={x:Math.abs(Math.round(N.pageX)-(J.current?.x??0)),y:Math.abs(Math.round(N.pageY)-(J.current?.y??0))}},A=N=>{g.x<=10&&g.y<=10?N.preventDefault():S.contains(N.target)||q(!1),document.removeEventListener("pointermove",_),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",_),document.addEventListener("pointerup",A,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",A,{capture:!0})}}},[S,q,J]),o.useEffect(()=>{const g=()=>q(!1);return window.addEventListener("blur",g),window.addEventListener("resize",g),()=>{window.removeEventListener("blur",g),window.removeEventListener("resize",g)}},[q]);const[ge,he]=zt(g=>{const _=R().filter(P=>!P.disabled),A=_.find(P=>P.ref.current===document.activeElement),N=Ut(_,g,A);N&&setTimeout(()=>N.ref.current.focus())}),ve=o.useCallback((g,_,A)=>{const N=!z.current&&!A;(x.value!==void 0&&x.value===_||N)&&(K(g),N&&(z.current=!0))},[x.value]),we=o.useCallback(()=>S?.focus(),[S]),oe=o.useCallback((g,_,A)=>{const N=!z.current&&!A;(x.value!==void 0&&x.value===_||N)&&Z(g)},[x.value]),de=l==="popper"?We:It,ue=de===We?{side:d,sideOffset:u,align:f,alignOffset:w,arrowPadding:v,collisionBoundary:T,collisionPadding:j,sticky:y,hideWhenDetached:h,avoidCollisions:b}:{};return e.jsx(Tt,{scope:t,content:S,viewport:F,onViewportChange:ne,itemRefCallback:ve,selectedItem:k,onItemLeave:we,itemTextRefCallback:oe,focusSelectedItem:I,selectedItemText:X,position:l,isPositioned:M,searchRef:ge,children:e.jsx(ps,{as:Ks,allowPinchZoom:!0,children:e.jsx(hs,{asChild:!0,trapped:x.open,onMountAutoFocus:g=>{g.preventDefault()},onUnmountAutoFocus:L(r,g=>{x.trigger?.focus({preventScroll:!0}),g.preventDefault()}),children:e.jsx(fs,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:m,onPointerDownOutside:c,onFocusOutside:g=>g.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:e.jsx(de,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:g=>g.preventDefault(),...C,...ue,onPlaced:()=>V(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:L(C.onKeyDown,g=>{const _=g.ctrlKey||g.altKey||g.metaKey;if(g.key==="Tab"&&g.preventDefault(),!_&&g.key.length===1&&he(g.key),["ArrowUp","ArrowDown","Home","End"].includes(g.key)){let N=R().filter(P=>!P.disabled).map(P=>P.ref.current);if(["ArrowUp","End"].includes(g.key)&&(N=N.slice().reverse()),["ArrowUp","ArrowDown"].includes(g.key)){const P=g.target,D=N.indexOf(P);N=N.slice(D+1)}setTimeout(()=>O(N)),g.preventDefault()}})})})})})})});Pt.displayName=$s;var qs="SelectItemAlignedPosition",It=o.forwardRef((s,a)=>{const{__scopeSelect:t,onPlaced:l,...r}=s,m=ce(pe,t),c=ie(pe,t),[d,u]=o.useState(null),[f,w]=o.useState(null),v=W(a,E=>w(E)),T=_e(t),j=o.useRef(!1),y=o.useRef(!0),{viewport:h,selectedItem:b,selectedItemText:C,focusSelectedItem:x}=c,S=o.useCallback(()=>{if(m.trigger&&m.valueNode&&d&&f&&h&&b&&C){const E=m.trigger.getBoundingClientRect(),k=f.getBoundingClientRect(),K=m.valueNode.getBoundingClientRect(),X=C.getBoundingClientRect();if(m.dir!=="rtl"){const P=X.left-k.left,D=K.left-P,ee=E.left-D,te=E.width+ee,be=Math.max(te,k.width),Se=window.innerWidth-Y,je=at(D,[Y,Math.max(Y,Se-be)]);d.style.minWidth=te+"px",d.style.left=je+"px"}else{const P=k.right-X.right,D=window.innerWidth-K.right-P,ee=window.innerWidth-E.right-D,te=E.width+ee,be=Math.max(te,k.width),Se=window.innerWidth-Y,je=at(D,[Y,Math.max(Y,Se-be)]);d.style.minWidth=te+"px",d.style.right=je+"px"}const Z=T(),R=window.innerHeight-Y*2,M=h.scrollHeight,V=window.getComputedStyle(f),z=parseInt(V.borderTopWidth,10),O=parseInt(V.paddingTop,10),I=parseInt(V.borderBottomWidth,10),q=parseInt(V.paddingBottom,10),J=z+O+M+q+I,ge=Math.min(b.offsetHeight*5,J),he=window.getComputedStyle(h),ve=parseInt(he.paddingTop,10),we=parseInt(he.paddingBottom,10),oe=E.top+E.height/2-Y,de=R-oe,ue=b.offsetHeight/2,g=b.offsetTop+ue,_=z+O+g,A=J-_;if(_<=oe){const P=Z.length>0&&b===Z[Z.length-1].ref.current;d.style.bottom="0px";const D=f.clientHeight-h.offsetTop-h.offsetHeight,ee=Math.max(de,ue+(P?we:0)+D+I),te=_+ee;d.style.height=te+"px"}else{const P=Z.length>0&&b===Z[0].ref.current;d.style.top="0px";const ee=Math.max(oe,z+h.offsetTop+(P?ve:0)+ue)+A;d.style.height=ee+"px",h.scrollTop=_-oe+h.offsetTop}d.style.margin=`${Y}px 0`,d.style.minHeight=ge+"px",d.style.maxHeight=R+"px",l?.(),requestAnimationFrame(()=>j.current=!0)}},[T,m.trigger,m.valueNode,d,f,h,b,C,m.dir,l]);le(()=>S(),[S]);const[$,F]=o.useState();le(()=>{f&&F(window.getComputedStyle(f).zIndex)},[f]);const ne=o.useCallback(E=>{E&&y.current===!0&&(S(),x?.(),y.current=!1)},[S,x]);return e.jsx(Ys,{scope:t,contentWrapper:d,shouldExpandOnScrollRef:j,onScrollButtonChange:ne,children:e.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$},children:e.jsx(B.div,{...r,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});It.displayName=qs;var Gs="SelectPopperPosition",We=o.forwardRef((s,a)=>{const{__scopeSelect:t,align:l="start",collisionPadding:r=Y,...m}=s,c=ke(t);return e.jsx(xs,{...c,...m,ref:a,align:l,collisionPadding:r,style:{boxSizing:"border-box",...m.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});We.displayName=Gs;var[Ys,Xe]=xe(pe,{}),$e="SelectViewport",Et=o.forwardRef((s,a)=>{const{__scopeSelect:t,nonce:l,...r}=s,m=ie($e,t),c=Xe($e,t),d=W(a,m.onViewportChange),u=o.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),e.jsx(Ee.Slot,{scope:t,children:e.jsx(B.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:L(r.onScroll,f=>{const w=f.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:T}=c;if(T?.current&&v){const j=Math.abs(u.current-w.scrollTop);if(j>0){const y=window.innerHeight-Y*2,h=parseFloat(v.style.minHeight),b=parseFloat(v.style.height),C=Math.max(h,b);if(C<y){const x=C+j,S=Math.min(y,x),$=x-S;v.style.height=S+"px",v.style.bottom==="0px"&&(w.scrollTop=$>0?$:0,v.style.justifyContent="flex-end")}}}u.current=w.scrollTop})})})]})});Et.displayName=$e;var _t="SelectGroup",[Xs,Zs]=xe(_t),Js=o.forwardRef((s,a)=>{const{__scopeSelect:t,...l}=s,r=Ye();return e.jsx(Xs,{scope:t,id:r,children:e.jsx(B.div,{role:"group","aria-labelledby":r,...l,ref:a})})});Js.displayName=_t;var kt="SelectLabel",Qs=o.forwardRef((s,a)=>{const{__scopeSelect:t,...l}=s,r=Zs(kt,t);return e.jsx(B.div,{id:r.id,...l,ref:a})});Qs.displayName=kt;var Pe="SelectItem",[en,Rt]=xe(Pe),Dt=o.forwardRef((s,a)=>{const{__scopeSelect:t,value:l,disabled:r=!1,textValue:m,...c}=s,d=ce(Pe,t),u=ie(Pe,t),f=d.value===l,[w,v]=o.useState(m??""),[T,j]=o.useState(!1),y=W(a,x=>u.itemRefCallback?.(x,l,r)),h=Ye(),b=o.useRef("touch"),C=()=>{r||(d.onValueChange(l),d.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(en,{scope:t,value:l,disabled:r,textId:h,isSelected:f,onItemTextChange:o.useCallback(x=>{v(S=>S||(x?.textContent??"").trim())},[]),children:e.jsx(Ee.ItemSlot,{scope:t,value:l,disabled:r,textValue:w,children:e.jsx(B.div,{role:"option","aria-labelledby":h,"data-highlighted":T?"":void 0,"aria-selected":f&&T,"data-state":f?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:y,onFocus:L(c.onFocus,()=>j(!0)),onBlur:L(c.onBlur,()=>j(!1)),onClick:L(c.onClick,()=>{b.current!=="mouse"&&C()}),onPointerUp:L(c.onPointerUp,()=>{b.current==="mouse"&&C()}),onPointerDown:L(c.onPointerDown,x=>{b.current=x.pointerType}),onPointerMove:L(c.onPointerMove,x=>{b.current=x.pointerType,r?u.onItemLeave?.():b.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:L(c.onPointerLeave,x=>{x.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:L(c.onKeyDown,x=>{u.searchRef?.current!==""&&x.key===" "||(Bs.includes(x.key)&&C(),x.key===" "&&x.preventDefault())})})})})});Dt.displayName=Pe;var ye="SelectItemText",Ot=o.forwardRef((s,a)=>{const{__scopeSelect:t,className:l,style:r,...m}=s,c=ce(ye,t),d=ie(ye,t),u=Rt(ye,t),f=zs(ye,t),[w,v]=o.useState(null),T=W(a,C=>v(C),u.onItemTextChange,C=>d.itemTextRefCallback?.(C,u.value,u.disabled)),j=w?.textContent,y=o.useMemo(()=>e.jsx("option",{value:u.value,disabled:u.disabled,children:j},u.value),[u.disabled,u.value,j]),{onNativeOptionAdd:h,onNativeOptionRemove:b}=f;return le(()=>(h(y),()=>b(y)),[h,b,y]),e.jsxs(e.Fragment,{children:[e.jsx(B.span,{id:u.textId,...m,ref:T}),u.isSelected&&c.valueNode&&!c.valueNodeHasChildren?mt.createPortal(m.children,c.valueNode):null]})});Ot.displayName=ye;var Lt="SelectItemIndicator",Mt=o.forwardRef((s,a)=>{const{__scopeSelect:t,...l}=s;return Rt(Lt,t).isSelected?e.jsx(B.span,{"aria-hidden":!0,...l,ref:a}):null});Mt.displayName=Lt;var Ke="SelectScrollUpButton",At=o.forwardRef((s,a)=>{const t=ie(Ke,s.__scopeSelect),l=Xe(Ke,s.__scopeSelect),[r,m]=o.useState(!1),c=W(a,l.onScrollButtonChange);return le(()=>{if(t.viewport&&t.isPositioned){let d=function(){const f=u.scrollTop>0;m(f)};const u=t.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),r?e.jsx(Ft,{...s,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=t;d&&u&&(d.scrollTop=d.scrollTop-u.offsetHeight)}}):null});At.displayName=Ke;var qe="SelectScrollDownButton",Bt=o.forwardRef((s,a)=>{const t=ie(qe,s.__scopeSelect),l=Xe(qe,s.__scopeSelect),[r,m]=o.useState(!1),c=W(a,l.onScrollButtonChange);return le(()=>{if(t.viewport&&t.isPositioned){let d=function(){const f=u.scrollHeight-u.clientHeight,w=Math.ceil(u.scrollTop)<f;m(w)};const u=t.viewport;return d(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),r?e.jsx(Ft,{...s,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:u}=t;d&&u&&(d.scrollTop=d.scrollTop+u.offsetHeight)}}):null});Bt.displayName=qe;var Ft=o.forwardRef((s,a)=>{const{__scopeSelect:t,onAutoScroll:l,...r}=s,m=ie("SelectScrollButton",t),c=o.useRef(null),d=_e(t),u=o.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return o.useEffect(()=>()=>u(),[u]),le(()=>{d().find(w=>w.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),e.jsx(B.div,{"aria-hidden":!0,...r,ref:a,style:{flexShrink:0,...r.style},onPointerDown:L(r.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(l,50))}),onPointerMove:L(r.onPointerMove,()=>{m.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(l,50))}),onPointerLeave:L(r.onPointerLeave,()=>{u()})})}),tn="SelectSeparator",sn=o.forwardRef((s,a)=>{const{__scopeSelect:t,...l}=s;return e.jsx(B.div,{"aria-hidden":!0,...l,ref:a})});sn.displayName=tn;var Ge="SelectArrow",nn=o.forwardRef((s,a)=>{const{__scopeSelect:t,...l}=s,r=ke(t),m=ce(Ge,t),c=ie(Ge,t);return m.open&&c.position==="popper"?e.jsx(gs,{...r,...l,ref:a}):null});nn.displayName=Ge;var on="SelectBubbleInput",Vt=o.forwardRef(({__scopeSelect:s,value:a,...t},l)=>{const r=o.useRef(null),m=W(l,r),c=xt(a);return o.useEffect(()=>{const d=r.current;if(!d)return;const u=window.HTMLSelectElement.prototype,w=Object.getOwnPropertyDescriptor(u,"value").set;if(c!==a&&w){const v=new Event("change",{bubbles:!0});w.call(d,a),d.dispatchEvent(v)}},[c,a]),e.jsx(B.select,{...t,style:{...is,...t.style},ref:m,defaultValue:a})});Vt.displayName=on;function Ht(s){return s===""||s===void 0}function zt(s){const a=ds(s),t=o.useRef(""),l=o.useRef(0),r=o.useCallback(c=>{const d=t.current+c;a(d),(function u(f){t.current=f,window.clearTimeout(l.current),f!==""&&(l.current=window.setTimeout(()=>u(""),1e3))})(d)},[a]),m=o.useCallback(()=>{t.current="",window.clearTimeout(l.current)},[]);return o.useEffect(()=>()=>window.clearTimeout(l.current),[]),[t,r,m]}function Ut(s,a,t){const r=a.length>1&&Array.from(a).every(f=>f===a[0])?a[0]:a,m=t?s.indexOf(t):-1;let c=an(s,Math.max(m,0));r.length===1&&(c=c.filter(f=>f!==t));const u=c.find(f=>f.textValue.toLowerCase().startsWith(r.toLowerCase()));return u!==t?u:void 0}function an(s,a){return s.map((t,l)=>s[(a+l)%s.length])}var rn=vt,ln=bt,cn=jt,dn=Ct,un=yt,mn=Nt,pn=Et,hn=Dt,fn=Ot,xn=Mt,gn=At,vn=Bt;function wn({...s}){return e.jsx(rn,{"data-slot":"select",...s})}function bn({...s}){return e.jsx(cn,{"data-slot":"select-value",...s})}function Sn({className:s,size:a="default",children:t,...l}){return e.jsxs(ln,{"data-slot":"select-trigger","data-size":a,className:U("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...l,children:[t,e.jsx(dn,{asChild:!0,children:e.jsx(Te,{className:"size-4 opacity-50"})})]})}function jn({className:s,children:a,position:t="popper",...l}){return e.jsx(un,{children:e.jsxs(mn,{"data-slot":"select-content",className:U("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...l,children:[e.jsx(yn,{}),e.jsx(pn,{className:U("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),e.jsx(Nn,{})]})})}function Cn({className:s,children:a,...t}){return e.jsxs(hn,{"data-slot":"select-item",className:U("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 ps-2 pe-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...t,children:[e.jsx("span",{className:"absolute end-2 flex size-3.5 items-center justify-center",children:e.jsx(xn,{children:e.jsx(gt,{className:"size-4"})})}),e.jsx(fn,{children:a})]})}function yn({className:s,...a}){return e.jsx(gn,{"data-slot":"select-scroll-up-button",className:U("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Ps,{className:"size-4"})})}function Nn({className:s,...a}){return e.jsx(vn,{"data-slot":"select-scroll-down-button",className:U("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(Te,{className:"size-4"})})}var Re="Switch",[Tn]=ft(Re),[Pn,In]=Tn(Re),Wt=o.forwardRef((s,a)=>{const{__scopeSwitch:t,name:l,checked:r,defaultChecked:m,required:c,disabled:d,value:u="on",onCheckedChange:f,form:w,...v}=s,[T,j]=o.useState(null),y=W(a,S=>j(S)),h=o.useRef(!1),b=T?w||!!T.closest("form"):!0,[C,x]=Ue({prop:r,defaultProp:m??!1,onChange:f,caller:Re});return e.jsxs(Pn,{scope:t,checked:C,disabled:d,children:[e.jsx(B.button,{type:"button",role:"switch","aria-checked":C,"aria-required":c,"data-state":Gt(C),"data-disabled":d?"":void 0,disabled:d,value:u,...v,ref:y,onClick:L(s.onClick,S=>{x($=>!$),b&&(h.current=S.isPropagationStopped(),h.current||S.stopPropagation())})}),b&&e.jsx(qt,{control:T,bubbles:!h.current,name:l,value:u,checked:C,required:c,disabled:d,form:w,style:{transform:"translateX(-100%)"}})]})});Wt.displayName=Re;var $t="SwitchThumb",Kt=o.forwardRef((s,a)=>{const{__scopeSwitch:t,...l}=s,r=In($t,t);return e.jsx(B.span,{"data-state":Gt(r.checked),"data-disabled":r.disabled?"":void 0,...l,ref:a})});Kt.displayName=$t;var En="SwitchBubbleInput",qt=o.forwardRef(({__scopeSwitch:s,control:a,checked:t,bubbles:l=!0,...r},m)=>{const c=o.useRef(null),d=W(c,m),u=xt(t),f=vs(a);return o.useEffect(()=>{const w=c.current;if(!w)return;const v=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(v,"checked").set;if(u!==t&&j){const y=new Event("click",{bubbles:l});j.call(w,t),w.dispatchEvent(y)}},[u,t,l]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:d,style:{...r.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qt.displayName=En;function Gt(s){return s?"checked":"unchecked"}var _n=Wt,kn=Kt;function Rn({className:s,...a}){return e.jsx(_n,{"data-slot":"switch",className:U("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(kn,{"data-slot":"switch-thumb",className:U("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0 rtl:data-[state=checked]:-translate-x-[calc(100%-2px)]")})})}function Dn({title:s,desc:a,children:t}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:s}),a&&e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:a})]}),t]})}const On=pt({id:fe(),pageName:fe().min(1,"ページ名は必須です"),content:fe().min(1,"コンテンツは必須です")}),Ln=pt({name:fe().min(1,"ドキュメント名は必須です"),website:fe().optional(),files:Je(Qt(File)).optional(),textDocumentName:fe().optional(),textPages:Je(On).optional()}),Mn=s=>{try{const a=new URL(s),t=`${a.protocol}//${a.host}`;return[{url:`${t}/about`},{url:`${t}/setting`},{url:`${t}/faq`}]}catch{return[]}},ut=s=>`${s} からクロールされたコンテンツのサンプル

## 概要

これはデモ用のモックデータです。実際の本番環境では、サーバーサイドでのクロール実装が推奨されます。

## 主な内容

${s} に関する詳細情報がここに表示されます。

### セクション1: イントロダクション

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.

### セクション2: 詳細説明

Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

### セクション3: まとめ

Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.`;function An({file:s,onRemove:a}){const t=Math.floor(s.size/2);return e.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-gray-50 p-3 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[t.toLocaleString()," 文字"]})]}),e.jsx(Q,{type:"button",variant:"ghost",size:"icon",onClick:a,className:"text-orange-500 hover:bg-orange-50 hover:text-orange-600 dark:hover:bg-orange-950/20",children:e.jsx(Ne,{className:"h-4 w-4"})})]})}function Jn(){const s=Zt(),t=ns().pathname==="/chatbox/document/new";let l;try{l=Jt.useParams().id}catch{l=void 0}const r=t?void 0:Ss.find(n=>n.id===l),[m,c]=o.useState(!1),[d,u]=o.useState(!1),[f,w]=o.useState(!1),[v,T]=o.useState("file"),[j,y]=o.useState([]),[h,b]=o.useState(!1),[C,x]=o.useState(!1),[S,$]=o.useState(null),[F,ne]=o.useState([]),[E,k]=o.useState([]),[K,X]=o.useState(new Set),R=t||!r?{name:"",website:"",textPages:[]}:r.documentTypes.includes("url")?{name:r.name,website:"https://example.com",textPages:[]}:r.documentTypes.includes("text")?{name:r.name,website:"",textPages:[{id:"1",pageName:"はじめに",content:"このドキュメントは、BOTの知識ベースとして使用される学習用コンテンツです。このセクションでは、基本的な概要と目的について説明します。"},{id:"2",pageName:"基本情報",content:"基本的な情報や手順について説明します。ここには重要な詳細情報が含まれています。"}]}:r.id?{name:r.name,website:"",textPages:[{id:"1",pageName:"はじめに",content:"このドキュメントは、BOTの知識ベースとして使用される学習用コンテンツです。このセクションでは、基本的な概要と目的について説明します。"},{id:"2",pageName:"基本情報",content:"基本的な情報や手順について説明します。ここには重要な詳細情報が含まれています。"}]}:{name:r.name,website:"",textPages:[]},[M,V]=o.useState(R.textPages),[z,O]=o.useState(new Set(R.textPages.map(n=>n.id))),I=es({resolver:ts(Ln),defaultValues:{name:R.name,website:R.website,files:[],textDocumentName:"",textPages:R.textPages}}),q=()=>{const n={id:Date.now().toString(),pageName:"",content:""},i=[...M,n];V(i),I.setValue("textPages",i),O(p=>new Set([...p,n.id]))};o.useEffect(()=>{if(R.textPages.length>0&&I.setValue("textPages",R.textPages),r?.documentTypes.includes("url")&&R.website){const n={id:"1",url:R.website,content:"これはサンプルのクロールされたコンテンツです。実際のウェブサイトから取得されたデータがここに表示されます。",characterCount:50,isCompleted:!0,isEnabled:!0};k([n])}},[]),o.useEffect(()=>{if(v==="text"&&M.length===0&&R.textPages.length===0){const n={id:Date.now().toString(),pageName:"",content:""},i=[n];V(i),I.setValue("textPages",i),O(p=>new Set([...p,n.id]))}},[v]);const J=n=>{const i=M.filter(p=>p.id!==n);V(i),I.setValue("textPages",i),O(p=>{const H=new Set(p);return H.delete(n),H})},ge=async n=>{x(!0);try{const i=`main-${Date.now()}`,p={id:i,url:n,content:"",characterCount:0,isCompleted:!1,isEnabled:!1};k(G=>[...G,p]),await new Promise(G=>setTimeout(G,2e3));const H=Mn(n);ne(H);const ae=ut(n),se=ae.length;k(G=>G.map(De=>De.id===i?{...De,content:ae,characterCount:se,isCompleted:!0,isEnabled:!0}:De)),re.success(`メインページと${H.length}個のリンクを検出しました`)}catch{re.error("リンクの検出に失敗しました"),k(i=>i.map(p=>p.url===n?{...p,isCompleted:!0,isEnabled:!1}:p))}finally{x(!1)}},he=async n=>{try{const i=Date.now().toString(),p={id:i,url:n,content:"",characterCount:0,isCompleted:!1,isEnabled:!1};k(se=>[...se,p]),await new Promise(se=>setTimeout(se,1500));const H=ut(n),ae=H.length;k(se=>se.map(G=>G.id===i?{...G,content:H,characterCount:ae,isCompleted:!0,isEnabled:!0}:G)),ne(se=>se.filter(G=>G.url!==n)),re.success("クロールが完了しました")}catch{re.error("クロールに失敗しました"),k(i=>i.map(p=>p.url===n?{...p,isCompleted:!0,isEnabled:!1}:p))}},ve=n=>{k(i=>i.map(p=>p.id===n?{...p,isEnabled:!p.isEnabled}:p))},we=n=>{k(i=>i.filter(p=>p.id!==n)),X(i=>{const p=new Set(i);return p.delete(n),p})},oe=n=>{X(i=>{const p=new Set(i);return p.has(n)?p.delete(n):p.add(n),p})},de=(n,i,p)=>{const H=M.map(ae=>ae.id===n?{...ae,[i]:p}:ae);V(H),I.setValue("textPages",H)},ue=n=>{O(i=>{const p=new Set(i);return p.has(n)?p.delete(n):p.add(n),p})},g=n=>{if(!n)return;const i=Array.from(n).filter(p=>p.type==="application/pdf"||p.name.endsWith(".pdf")||p.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||p.name.endsWith(".docx"));y(p=>[...p,...i]),I.setValue("files",[...j,...i])},_=n=>{n.preventDefault(),b(!1),g(n.dataTransfer.files)},A=n=>{n.preventDefault(),b(!0)},N=()=>{b(!1)},P=n=>{g(n.target.files)},D=n=>{const i=j.filter((p,H)=>H!==n);y(i),I.setValue("files",i)},ee=async n=>{c(!0);try{await new Promise(i=>setTimeout(i,1e3)),re.success("ドキュメントが正常に更新されました"),s({to:"/chatbox/document"})}catch{re.error("更新に失敗しました")}finally{c(!1)}},te=()=>{u(!0)},be=async()=>{c(!0);try{await new Promise(n=>setTimeout(n,1e3)),u(!1),re.error("ドキュメントが正常に削除されました"),s({to:"/chatbox/document"})}catch{re.error("削除に失敗しました"),u(!1)}finally{c(!1)}},Se=()=>{w(!0)},je=()=>{w(!1),s({to:"/chatbox/document"})};if(!t&&!r)return e.jsxs(e.Fragment,{children:[e.jsx(rt,{fixed:!0,title:"出展者ＢＯＴの管理 | 株式会社日本医工研究所",children:e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(lt,{}),e.jsx(ct,{})]})}),e.jsx(ot,{className:"flex flex-1 flex-col items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"ドキュメントが見つかりませんでした"})})]});const Ce=[{title:"ファイルアップロード",value:"file",icon:e.jsx(dt,{size:18}),contentTitle:"ファイルアップロード",contentDesc:"ファイルをアップロードしてドキュメントを作成します。"},{title:"URL クローラー",value:"website",icon:e.jsx(js,{size:18}),contentTitle:"URL クローラー",contentDesc:"URL からコンテンツを取得します。"},{title:"テキスト入力",value:"text",icon:e.jsx(ys,{size:18}),contentTitle:"テキスト入力",contentDesc:"テキストコンテンツを直接入力してドキュメントを作成します。複数のページを作成し、各ページに名前とコンテンツを設定できます。"}],Ze=Ce.find(n=>n.value===v);return e.jsxs(e.Fragment,{children:[e.jsxs(rt,{children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-medium sm:text-base",children:"出展者ＢＯＴの管理 | 株式会社日本医工研究所"})}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(lt,{}),e.jsx(ct,{}),e.jsx(bs,{})]})]}),e.jsxs(ot,{fixed:!0,children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx("h1",{className:"text-lg font-bold tracking-tight md:text-xl",children:t?"データ新規作成":"データ編集"})}),e.jsx(ws,{className:"my-2 lg:my-4"}),e.jsxs("div",{className:"flex flex-1 flex-col space-y-2 overflow-hidden md:space-y-2 lg:flex-row lg:space-y-0 lg:space-x-12",children:[e.jsxs("aside",{className:"top-0 flex items-start lg:sticky lg:w-1/5",children:[e.jsx("div",{className:"mb-4 p-1 md:hidden",children:e.jsxs(wn,{value:v,onValueChange:T,children:[e.jsx(Sn,{className:"h-12 w-48",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"scale-125",children:Ce.find(n=>n.value===v)?.icon}),e.jsx(bn,{children:Ce.find(n=>n.value===v)?.title||"タブを選択"})]})}),e.jsx(jn,{children:Ce.map(n=>e.jsx(Cn,{value:n.value,children:e.jsxs("div",{className:"flex items-center gap-x-4 px-2 py-1",children:[e.jsx("span",{className:"scale-125",children:n.icon}),e.jsx("span",{className:"text-md",children:n.title})]})},n.value))})]})}),e.jsx(os,{orientation:"horizontal",type:"always",className:"bg-background hidden w-full min-w-40 px-1 py-2 md:flex",children:e.jsx("nav",{className:"flex space-x-2 py-1 lg:flex-col lg:space-y-1 lg:space-x-0",children:Ce.map(n=>e.jsxs(Q,{type:"button",variant:"ghost",onClick:()=>T(n.value),className:U("w-50 justify-start",v===n.value?"bg-muted hover:bg-accent":"hover:bg-accent hover:underline"),children:[e.jsx("span",{className:"me-2",children:n.icon}),e.jsx("span",{className:"text-sm font-bold",children:n.title})]},n.value))})})]}),e.jsx("div",{className:"flex w-full overflow-y-hidden p-1",children:e.jsx(Dn,{title:Ze?.contentTitle||"",desc:Ze?.contentDesc||"",children:e.jsx(ss,{...I,children:e.jsxs("form",{onSubmit:I.handleSubmit(ee),onKeyDown:n=>{n.key==="Enter"&&n.target instanceof HTMLInputElement&&n.preventDefault()},className:"space-y-6",children:[e.jsx(Oe,{control:I.control,name:"name",render:({field:n})=>e.jsxs(Le,{children:[e.jsx("span",{className:"mb-2 block text-sm font-bold",children:"ドキュメント名"}),e.jsx(Me,{children:e.jsx(Be,{placeholder:"ドキュメント名を入力",...n})}),e.jsx(Ae,{})]})}),v==="file"&&e.jsx(Oe,{control:I.control,name:"files",render:()=>e.jsxs(Le,{children:[e.jsx("div",{className:"mb-2 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"block text-sm font-bold",children:"ファイルアップロード"}),e.jsxs(Fe,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(Qe,{className:"text-muted-foreground h-4 w-4 cursor-help"})}),e.jsx(He,{className:"max-w-xs",children:e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsx("p",{children:"ファイルをアップロードして、BOTの知識ベースを構築します。"}),e.jsx("p",{children:"アップロードされた文書の内容は解析され、BOTが質問に答える際の参考データとして使用されます。"}),e.jsx("p",{className:"font-medium",children:"対応形式: PDF, DOCX, TXT"})]})})]})]})}),e.jsx(Me,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{onDrop:_,onDragOver:A,onDragLeave:N,className:U("cursor-pointer rounded-lg border-2 border-dashed p-8 text-center transition-colors",h?"border-blue-500 bg-blue-50 dark:bg-blue-950/20":"border-blue-300 hover:border-blue-400"),onClick:()=>{window.document.getElementById("file-input")?.click()},children:[e.jsx("input",{id:"file-input",type:"file",accept:".pdf,.docx",multiple:!0,onChange:P,className:"hidden"}),e.jsx(dt,{className:"mx-auto mb-4 h-12 w-12"}),e.jsx("p",{className:"mb-2 text-sm font-medium",children:"ファイルをここにドラッグアンドドロップするか、クリックしてファイルを選択してください"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"サポートされているファイル形式: .PDF、.DOCX"})]}),j.length>0&&e.jsx("div",{className:"space-y-2",children:j.map((n,i)=>e.jsx(An,{file:n,onRemove:()=>D(i)},i))}),e.jsx("div",{className:"flex items-center justify-end",children:j.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"font-medium",children:["ファイル数: ",j.length]}),e.jsx("span",{className:"text-muted-foreground",children:"|"}),e.jsxs("span",{className:"text-muted-foreground text-xs",children:["検出された文字数:"," ",j.reduce((n,i)=>{const p=Math.floor(i.size/2);return n+p},0).toLocaleString()]})]})})]})}),e.jsx(Ae,{})]})}),v==="website"&&e.jsx(Oe,{control:I.control,name:"website",render:({field:n})=>e.jsxs(Le,{children:[e.jsxs("div",{className:"mb-2 flex flex-col gap-1",children:[e.jsx("div",{className:"flex items-center justify-between gap-2",children:e.jsx("span",{className:"block text-sm font-bold",children:"ウェブサイト"})}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"複数のURLを連続して追加できます。クロールは自動的にバックグラウンドで実行されます。（デモモード: サンプルデータを生成します）"})]}),e.jsx(Me,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{placeholder:"https://example.com",className:"flex-1 rounded-md",...n}),e.jsx(Q,{type:"button",className:"rounded-md bg-blue-600 text-white hover:bg-blue-700",disabled:!n.value||n.value.trim()===""||C||E.some(i=>n.value&&i.url===n.value.trim()),onClick:async()=>{n.value&&await ge(n.value)},children:C?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"h-4 w-4 animate-spin"}),"取得中..."]}):"リンクから取得"})]})}),e.jsx(Ae,{}),F.length>0&&e.jsxs("div",{className:"mt-4 space-y-2 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{className:"text-sm font-bold",children:"検出されたリンク（クリックして追加）"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:F.map((i,p)=>e.jsx(Q,{type:"button",variant:"outline",onClick:()=>he(i.url),className:"h-auto rounded-full border-blue-200 bg-blue-50 px-3 py-1 text-xs text-blue-700 hover:bg-blue-100 hover:text-blue-800",children:i.url},p))})]}),E.length>0&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"text-sm font-bold",children:"クロールされたページ"})}),E.map(i=>e.jsx(tt,{open:K.has(i.id),onOpenChange:()=>oe(i.id),children:e.jsxs("div",{className:"rounded-lg border",children:[e.jsxs(st,{className:"bg-muted/50 hover:bg-muted/50 flex w-full items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:U("h-4 w-4 transition-transform",K.has(i.id)&&"rotate-180")}),e.jsx("span",{className:"text-sm font-medium",children:i.url})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i.isCompleted?e.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-green-100 px-2 py-1 dark:bg-green-900/30",children:[e.jsx(gt,{className:"h-3 w-3 text-green-700 dark:text-green-400"}),e.jsxs("span",{className:"text-xs font-medium text-green-700 dark:text-green-400",children:["完了 (",i.characterCount.toLocaleString(),"文字)"]})]}):e.jsxs("div",{className:"bg-primary/10 flex items-center gap-1 rounded-full px-2 py-1",children:[e.jsx(ze,{className:"text-primary h-3 w-3 animate-spin"}),e.jsx("span",{className:"text-primary text-xs font-medium",children:"クロール中..."})]}),e.jsxs(Fe,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx("div",{onClick:p=>p.stopPropagation(),children:e.jsx(Rn,{checked:i.isEnabled,onCheckedChange:()=>ve(i.id),disabled:!i.isCompleted})})}),e.jsx(He,{children:e.jsx("p",{className:"text-xs",children:i.isCompleted?i.isEnabled?"このページを無効にする":"このページを有効にする":"クロール中..."})})]}),e.jsx(Q,{type:"button",variant:"ghost",size:"icon",onClick:p=>{p.stopPropagation(),we(i.id)},disabled:!i.isCompleted,className:"text-destructive hover:bg-destructive/10 h-8 w-8 disabled:opacity-50",children:e.jsx(Ne,{className:"h-4 w-4"})})]})]}),e.jsx(nt,{className:"p-4",children:i.isCompleted?e.jsx(et,{value:i.content,readOnly:!0,className:"bg-muted/50 min-h-64 resize-none"}):e.jsx("div",{className:"flex min-h-64 items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ze,{className:"text-muted-foreground h-6 w-6 animate-spin"}),e.jsx("span",{className:"text-muted-foreground text-sm",children:"コンテンツを取得中..."})]})})})]})},i.id)),E.length>0&&e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("span",{className:"text-muted-foreground text-sm font-medium",children:["合計:"," ",E.filter(i=>i.isEnabled).length,"ページ /"," ",E.filter(i=>i.isEnabled).reduce((i,p)=>i+p.characterCount,0).toLocaleString(),"文字"]})})]})]})}),v==="text"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"block text-sm font-bold",children:"コンテンツ"}),e.jsxs(Fe,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(Qe,{className:"text-muted-foreground h-4 w-4 cursor-help"})}),e.jsx(He,{className:"max-w-xs",children:e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsx("p",{children:"複数のページを作成し、各ページに名前とコンテンツを設定できます。"}),e.jsx("p",{children:"各ページのコンテンツは、BOTの知識ベースとして使用され、質問への回答に活用されます。"})]})})]})]}),M.map(n=>e.jsx(tt,{open:z.has(n.id),onOpenChange:()=>ue(n.id),children:e.jsxs("div",{className:"rounded-lg border",children:[e.jsxs(st,{className:"hover:bg-muted/50 flex w-full items-center justify-between p-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-medium",children:n.pageName?`${n.pageName}ページ`:"新しいページ"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{type:"button",variant:"ghost",size:"icon",onClick:i=>{i.stopPropagation(),J(n.id)},className:"text-destructive hover:bg-destructive/10 h-8 w-8",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(Te,{className:U("h-4 w-4 transition-transform",z.has(n.id)&&"rotate-180")})]})]}),e.jsx(nt,{className:"px-4 pb-4",children:e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"mb-2 block text-sm font-medium",children:"ページ名"}),e.jsx(Be,{placeholder:"ページ名を入力",value:n.pageName,onChange:i=>de(n.id,"pageName",i.target.value)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"mb-2 block text-sm font-medium",children:"コンテンツ"}),e.jsx(et,{placeholder:"コンテンツを入力",value:n.content,onChange:i=>de(n.id,"content",i.target.value),className:"min-h-32"}),e.jsx("div",{className:"mt-2 flex items-center justify-end",children:e.jsxs("span",{className:"text-muted-foreground text-xs",children:["検出された文字数:"," ",n.content?.length?.toLocaleString()]})})]})]})})]})},n.id)),M.length>0&&e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("span",{className:"text-muted-foreground text-sm font-medium",children:["全ページの合計文字数:"," ",M.reduce((n,i)=>n+(i.content?.length||0),0).toLocaleString()]})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(Q,{type:"button",onClick:q,className:"w-fit",children:[e.jsx(Cs,{className:"size-4"}),"ページを追加"]})})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4",children:[e.jsx(Q,{type:"button",onClick:Se,disabled:m,className:"h-10 w-24 text-white hover:opacity-90",style:{backgroundColor:"#6B7280"},children:"キャンセル"}),!t&&e.jsxs(Q,{type:"button",onClick:te,disabled:m,className:"h-10 w-24 text-white hover:opacity-90",style:{backgroundColor:"#EF4444"},children:[e.jsx(Ne,{className:"size-4"}),"削除"]}),e.jsx(Q,{type:"submit",disabled:m,className:"h-10 w-24 text-white hover:opacity-90",style:{backgroundColor:"#3B82F6"},children:m?t?"作成中...":"更新中...":t?"作成":"更新"})]})]})})})})]}),e.jsx(it,{open:d,onOpenChange:u,title:"削除の確認",desc:"このドキュメントを削除してもよろしいですか？この操作は元に戻せません。",confirmText:"削除",cancelBtnText:"キャンセル",destructive:!0,handleConfirm:be,isLoading:m}),e.jsx(it,{open:f,onOpenChange:w,title:"変更を破棄しますか？",desc:"変更を保存せずにページを離れますか？保存されていない変更は失われます。",confirmText:"破棄",cancelBtnText:"キャンセル",handleConfirm:je,isLoading:m})]})]})}export{Jn as D};
